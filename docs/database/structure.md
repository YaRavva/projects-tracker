# Структура базы данных

## Таблицы и индексы

### Таблица `projects`
Основная таблица для хранения информации о проектах.

**Индексы:**
- `projects_pkey` - Первичный ключ по полю `id`
- `projects_owner_id_idx` - Индекс по полю `owner_id` для быстрого поиска проектов по владельцу

### Таблица `project_members`
Таблица для хранения информации об участниках проектов (связь многие-ко-многим между проектами и пользователями).

**Индексы:**
- `project_members_pkey` - Первичный ключ по полю `id`
- `project_members_project_id_user_id_key` - Уникальный индекс по полям `project_id` и `user_id` (предотвращает дублирование участников в проекте)
- `project_members_project_id_idx` - Индекс по полю `project_id` для быстрого поиска участников проекта
- `project_members_user_id_idx` - Индекс по полю `user_id` для быстрого поиска проектов пользователя

### Таблица `profiles`
Таблица для хранения информации о пользователях.

**Индексы:**
- `profiles_pkey` - Первичный ключ по полю `id`
- `profiles_email_idx` - Индекс по полю `email` для быстрого поиска пользователей по email

## Связи между таблицами

- `projects.owner_id` -> `profiles.id` - Связь между проектом и его владельцем
- `project_members.project_id` -> `projects.id` - Связь между участником и проектом
- `project_members.user_id` -> `profiles.id` - Связь между участником и пользователем

## Примечание

В текущей структуре базы данных отсутствуют явно определенные внешние ключи (FOREIGN KEY) между таблицами `project_members` и `profiles`. Это приводит к ошибке при попытке получить связанные данные через Supabase. 

Для решения этой проблемы мы используем отдельные запросы для получения данных из таблиц `projects`, `project_members` и `profiles`, а затем объединяем их в коде приложения.
