# Система управления цифровыми проектами

**Исполнители**:
- [Иванов Иван, 11А] (Лидер)
- [Петров Петр, 11Б] (Участник)
- [Сидоров Сидор, 10А] (Участник)

**Ссылки**:
- GitHub: [https://github.com/example/project-tracker]
- Демо: [https://example.vercel.app]

## Описание
Система для управления цифровыми проектами учащихся. Позволяет создавать проекты, 
отслеживать их прогресс, управлять этапами и участниками. Включает аналитику 
и возможность импорта данных из PRD.md файлов.

## Этапы
- [x] Проектирование базы данных (01.11.2023)
- [x] Разработка API (15.11.2023)
- [ ] Разработка интерфейса (01.12.2023)
- [ ] Тестирование (15.12.2023)
- [ ] Запуск в продакшн (25.12.2023)

## Технические требования
- Next.js для фронтенда
- Supabase для бэкенда и аутентификации
- Tailwind CSS для стилизации
- TypeScript для типизации

## Функциональные требования
1. Аутентификация пользователей
2. Управление проектами (создание, редактирование, удаление)
3. Управление этапами проектов
4. Отслеживание прогресса
5. Импорт данных из PRD.md файлов
6. Аналитика и отчеты

Digital Projects Tracker - Product Requirements Document (PRD)

**Версия**: 2.0  
**Дата**: 05.04.2025  

## 1. Обзор продукта
Веб-приложение для управления школьными IT-проектами с:
- Трекингом индивидуальных/групповых работ
- Визуализацией прогресса
- Интеграцией с GitHub
- Хранением документации

## 2. Функциональные требования

### 2.1 Управление проектами
- Создание/редактирование проектов
- Загрузка PRD.md (валидация формата)
- Система утверждения проектов
- Автоматический расчет прогресса

### 2.2 Система утверждения проектов
Обновленный план разработки системы утверждения проектов
1. Анализ текущего состояния (без изменений)
2. Необходимые изменения в базе данных
Обновление таблицы projects:
Изменить значение по умолчанию для поля status с 'active' на 'pending'
Добавить поле review_comment для хранения комментариев при отклонении или возврате на доработку
Обновить возможные значения статуса: 'active', 'pending', 'returned', 'rejected'
ALTER TABLE public.projects ALTER COLUMN status SET DEFAULT 'pending';
ALTER TABLE public.projects ADD COLUMN review_comment TEXT;
Создание таблицы project_reviews для хранения истории рассмотрения проектов:
Обновление политик доступа к проектам:
3. Разработка компонента карточки проекта (новый приоритетный пункт)
Создать компонент ProjectDetails.tsx:
Детальное отображение всей информации о проекте
Отображение статуса проекта с соответствующим визуальным индикатором
Отображение комментариев администратора (если есть)
История рассмотрения проекта (из таблицы project_reviews)
Для администраторов: элементы управления для изменения статуса проекта
Создать компонент ProjectStatusBadge.tsx:
Визуальное отображение статуса проекта с соответствующим цветом и иконкой:
'active' - зеленый (Активный)
'pending' - желтый (На рассмотрении)
'returned' - оранжевый (Возвращен на доработку)
'rejected' - красный (Отклонен)
Создать компонент ProjectReviewForm.tsx:
Форма для администраторов для изменения статуса проекта
Поле для ввода комментария
Кнопки для утверждения, отклонения и возврата на доработку
4. Изменения в логике создания проектов
Обновить логику создания проектов:
Проверять роль пользователя при создании проекта
Если пользователь с ролью 'admin', устанавливать статус 'active'
Если пользователь с ролью 'student', устанавливать статус 'pending'
Обновить компоненты создания проектов:
ProjectForm.tsx
ImportPRDForm.tsx
NewProjectForm.tsx
5. Разработка API для управления статусами проектов
Создать единый API-маршрут:
/api/projects/update-status - для всех операций по изменению статуса проекта
Реализовать логику обработки запросов:
Принимать параметры в теле запроса:
Проверять роль пользователя (только администраторы могут менять статус)
Обновлять статус проекта в зависимости от действия
Сохранять комментарий при необходимости
Добавлять запись в таблицу project_reviews
6. Обновление интерфейса пользователя
Обновить компонент ProjectsTable.tsx:
Добавить отображение статуса проекта с использованием ProjectStatusBadge
Добавить фильтрацию по статусу проекта
Обновить компонент ProjectCard.tsx:
Добавить отображение статуса проекта с использованием ProjectStatusBadge
Добавить индикатор для проектов, требующих внимания (возвращенные на доработку)
7. Обновление фильтров и поиска проектов
Обновить компонент ProjectFilters.tsx:
Добавить фильтр по статусу проекта
Для администраторов: добавить возможность фильтрации проектов на рассмотрении
Обновить хук useProjects.ts:
Добавить поддержку фильтрации по статусу проекта
Учитывать роль пользователя при загрузке проектов (студенты видят только свои проекты со статусами 'pending', 'returned', 'rejected')
8. Разработка интерфейса администратора для управления проектами
Создать страницу для администраторов:
Таблица с проектами, ожидающими рассмотрения
Возможность быстрого просмотра деталей проекта
Кнопки для утверждения, отклонения и возврата на доработку
Создать компонент AdminProjectsTable.tsx:
Расширенная версия ProjectsTable с дополнительными функциями для администраторов
Возможность массового утверждения проектов
Сортировка по дате создания, статусу и т.д.
9. Уведомления пользователей
Создать систему уведомлений:
Уведомлять студентов об изменении статуса их проектов
Уведомлять администраторов о новых проектах на рассмотрении
10. Тестирование и документация (без изменений)
Приоритизация задач (обновленная)
Высокий приоритет:
Обновление структуры базы данных
Разработка компонента карточки проекта с детальной информацией
Изменение логики создания проектов
Обновление политик доступа к проектам
Средний приоритет:
Разработка API для управления статусами проектов
Обновление интерфейса пользователя
Обновление фильтров и поиска проектов
Низкий приоритет:
Разработка расширенного интерфейса администратора
Система уведомлений
Дополнительные функции для администраторов

### 2.3 Аналитика
- Графики прогресса
- Отчеты по активности

## 3. Пользовательские роли
| Роль       | Права                          |
|------------|-------------------------------|
| student    | Создание проектов, работа с задачами |
| admin      | Утверждение проектов, аналитика |
| guest     | Просмотр проектов             |

## 4. Технические спецификации

**Технический стек**:
- Фронтенд: Next.js (TSX), Tailwind CSS, shadcn
- Бэкенд: Cloud Supabase (PostgreSQL)
- Аутентификация: Cloud Supabase
- Хостинг: Vercel

## 5. Интерфейс



### Основные экраны

1. **Дашборд проектов**:
    
    - Фильтры по статусу
    - Поиск по названию
    - Сортировка по дедлайнам
    - Красивые прогресс-бары, индикаторы дедлайнов, красивые карточки проектов, различные виды показа проектов
        
2. **Карточка проекта**:
    
    - Прикрепленные ссылки
    - Прогресс выполнения
    - Редактирование проекта
    - Удаление проекта
        
   
## 6. Критерии приемки

### Основные сценарии

| Сценарий                 | Ожидаемый результат                                        |
| ------------------------ | ---------------------------------------------------------- |
| Создание проекта         | Проект появляется в системе с статусом "На рассмотрении"   |
| Утверждение проекта      | Учитель подтверждает проект, статус меняется на "Активный" |
| Загрузка PRD             | Система проверяет формат документа                         |
| Изменение статуса задачи | Прогресс проекта автоматически пересчитывается             |

## 7. Дорожная карта

### 7.1 Этапы разработки

1. Настройка проекта
    - Инициализация Next.js с TypeScript
    - Установка Tailwind CSS и shadcn
    - Создание репозитория
2. Настройка базы данных
    - Подключение Supabase
    - Миграции для основных таблиц
    - Настройка политик доступа
3. Аутентификация
    - Интеграция NextAuth.js
    - Страницы входа/регистрации
    - Разработка дизайна
4. Основной функционал проектов
    - Управление проектами
    - Страница просмотра проекта
5. Основной функционал проектов
    - Управление проектами

    - Страница просмотра проекта
6. Прогресс проекта
    - Расчет прогресса
    - Визуализация прогресса
    - Временная шкала

#### Тестирование и оптимизация MVP

1. Тестирование
    - Unit-тесты
    - Интеграционные тесты
    - Тестирование UI
2. Оптимизация
    - Производительность
    - SEO
    - Доступность

#### Интеграции и аналитика

2. Аналитика
    - Графики активности
    - Статистика по проектам
    - Экспорт отчетов

#### Финальные улучшения

1. Мобильная адаптация
    - Респонсивный дизайн
    - Мобильная навигация
    - Тестирование на устройствах
2. Дополнительные функции
    - Система уведомлений
    - Расширенные настройки профиля
    - Документация

#### Технические детали для каждого этапа:

#### Структура проекта

#### Основные компоненты для разработки:

1. Аутентификация
    - `AuthProvider`
    - `LoginForm`
    - `RegisterForm`
2. Проекты
    - `ProjectCard`
    - `ProjectForm`
    - `ProjectDashboard`
3. Аналитика
    - `ProgressChart`
    - `ActivityGraph`
    - `ProjectStats`
        

## 8. Ограничения

  
- Supabase Free Tier ограничения
    

## Приложения

## **Шаблон PRD.md**
```
# Название проекта  

**Исполнители**:  
- [Фамилия Имя, класс] (Лидер)  
- [Фамилия Имя, класс] (Участник)  

**Ссылки**:  
- Репозиторий: [GitHub URL]  
- Демо: [URL проекта]  

## Описание  
[Цель и технологии]  

## Этапы  
- [ ] Этап 1 (15.11.24)  
- [x] Этап 2 (10.11.24)  

------------------------------------------------------

**Как использовать**:
1. Скопируйте весь текст
2. Сохраните как `PRD.md`
3. Заполните разделы в квадратных скобках
4. Удалите примеры перед использованием

**Для редактирования**:
- Замените `[ ]` на `[x]` для завершенных этапов
- Даты в формате ДД.ММ.ГГ
- GitHub URL: `username/repo` или полная ссылка
```

